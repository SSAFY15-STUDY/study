name: Slack PR Monitor

on:
  pull_request:
    # opened: ìƒˆ PR ìƒì„±
    # synchronize: ê¸°ì¡´ PRì— ì¶”ê°€ ì»¤ë°‹(ìˆ˜ì •ë³¸) í‘¸ì‹œ
    types: [opened, synchronize]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Slack Notification
        env:
          PR_TITLE: ${{ github.event.pull_request.title }}
          PR_URL: ${{ github.event.pull_request.html_url }}
          AUTHOR: ${{ github.event.pull_request.user.login }}
          ACTION: ${{ github.event.action == 'opened' && 'ğŸš€ ìƒˆ PR' || 'â™»ï¸ ìˆ˜ì •ë³¸' }}
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data "{
            \"text\": \"${ACTION}ì´ ì˜¬ë¼ì™”ìŠµë‹ˆë‹¤!\n*ì œëª©:* ${PR_TITLE}\n*ì‘ì„±ì:* ${AUTHOR}\n*ë§í¬:* ${PR_URL}\"
          }" \
          ${SLACK_WEBHOOK_URL}